for each user_query:
llm_response = gpt4o_generate_response(query, include_rationale=True)
if llm_response.contains_tool_request:
tool_result = call_flask_api(llm_response.tool_request)
prolog_output = prolog_verify(tool_result, llm_response.expected_data)
if prolog_output.is_valid:
final_answer = generate_response_with(prolog_output)
else:
final_answer = regenerate_response_with(tool_result, prolog_output.justification)
else:
final_answer = llm_response
return final_answer
